# Manual Code Review Exercise - Instructor Guide

## ðŸ”§ Setup Instructions

**Technical Prerequisites:**
- Students need access to the vulnerable application files
- Basic text editor or VS Code for viewing source code
- Terminal access for navigation commands

**Pre-Class Setup (5 minutes):**
```bash
# Verify students can access the application
cd /workspaces/Secure_Architecture_Sandbox_Testing_Environment
ls samples/unsecure-pwa/

# Check main files are readable
cat samples/unsecure-pwa/main.py | head -10
cat samples/unsecure-pwa/user_management.py | head -10
```

**Time Requirements:**
- Total Duration: 1-2 hours
- Can be split into two 45-60 minute sessions
- Optimal class size: 12-20 students

## ðŸ“š Teaching Notes

### Opening Context (10 minutes)
Explain manual code review as **systematic examination of source code** to find security vulnerabilities that automated tools miss. Key concept: human intelligence identifies complex business logic flaws.

**Essential Concepts:**
- **Manual vs Automated**: Humans understand context and intent, tools find patterns
- **Security Mindset**: Think like an attacker - "How could this be misused?"
- **Systematic Approach**: Follow structured methodology, don't randomly hunt

### Core Vulnerabilities Students Should Find

**1. SQL Injection (Critical)**
- **Location**: `user_management.py` - String formatting in SQL queries
- **Teaching Point**: Show difference between dangerous string concatenation and safe parameterized queries
- **Real Impact**: Complete database compromise

**2. Authentication Logic Flaw (High)**  
- **Location**: `retrieveUsers` function - Separate username/password validation
- **Teaching Point**: Business logic errors that tools miss
- **Real Impact**: Authentication bypass with mixed credentials

**3. Cross-Site Scripting (High)**
- **Location**: Templates with `|safe` filter, `listFeedback` function
- **Teaching Point**: Output encoding failures and template security
- **Real Impact**: JavaScript injection and session theft

### Guided Discovery Questions
- "What happens if someone types weird characters in the username field?"
- "Could someone type something that changes what this query does?"
- "Does this code check that username AND password belong to the same user?"
- "What does the `|safe` filter do in templates?"

### Teaching Progression
1. **Start Simple**: Begin with obvious SQL injection patterns
2. **Build Complexity**: Move to business logic flaws
3. **Connect Concepts**: Link findings to real-world attack scenarios
4. **Document Process**: Teach professional vulnerability reporting
### Teaching Progression
1. **Start Simple**: Begin with obvious SQL injection patterns
2. **Build Complexity**: Move to business logic flaws
3. **Connect Concepts**: Link findings to real-world attack scenarios
4. **Document Process**: Teach professional vulnerability reporting

## ðŸ”§ Troubleshooting Guide

### Common Student Challenges

**"I don't understand the code"**
- Focus on input/output flow rather than complex syntax
- Ask: "Where does user input come from?" "What happens to it?"

**"Everything looks vulnerable"** 
- Teach prioritization: "What's the worst that could happen?"
- Guide students to focus on user-controlled input paths

**"I can't find any vulnerabilities"**
- Provide guided discovery questions
- Point students to specific functions: `retrieveUsers`, template files
- Use line numbers to direct attention

**"I found something but not sure if it's a problem"**
- Encourage hypothesis testing: "What would you type to test this?"
- Connect to real attack scenarios

### Technical Issues

**Students can't find files:**
```bash
cd /workspaces/Secure_Architecture_Sandbox_Testing_Environment
ls samples/unsecure-pwa/
```

**Students get overwhelmed:**
- Focus on one function at a time
- Use the "one vulnerability per session" approach

**Students miss obvious issues:**
- Use guided questions to redirect attention
- Point to specific dangerous patterns (string formatting in SQL)

### Quick Reference for Instructors

**Key Vulnerable Code Locations:**
1. **SQL Injection**: Lines with `f"SELECT * FROM..."` in `user_management.py`
2. **XSS**: `|safe` filter in templates, HTML writing in `listFeedback` 
3. **Auth Bypass**: Separate username/password queries in `retrieveUsers`

**Success Indicators:**
- Students can explain why string formatting in SQL is dangerous
- Students recognise the `|safe` filter as a security risk
- Students understand business logic flaws vs code-level issues
